webpackJsonp([2],{"4eo9":function(t,e){},Quw4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Dd8w"),i=n.n(s),a=n("9r5n"),o=n("NYxO"),c=n("rQBB"),r={name:"login",data:function(){return{username:"",password:"",isLogin:null}},created:function(){var t=this;this.$route.query.redirect&&c.a.setStorage(a.a,this.$route.query.redirect);var e=location.hash.substring(1,window.location.hash.length-1);e?(this.$cookies.set(a.b,e),this.wxAuth().then(function(e){t.handleLoginSuccess()}).catch(function(e){e.response&&400==e.response.status?t.wxLogin():t.handleLoginFail()})):(this.$cookies.remove(a.b),this.isLogin=!1),this.intallJSEncrypt(),this.isLogin=this.$cookies.get(a.b)},mounted:function(){},methods:i()({},Object(o.d)("auth",["setAuth"]),Object(o.b)("auth",["intallJSEncrypt","passAuth","wxAuth","wxLogin"]),{cancelLogin:function(){c.a.rmStorage(a.a),this.$router.go(-1)},handleLogin:function(){var t=this;this.username&&this.password?(this.$indicator.open({text:a.c,spinnerType:"fading-circle"}),this.passAuth({username:this.username,password:this.password}).then(function(e){t.$indicator.close(),t.handleLoginSuccess()}).catch(function(e){t.$indicator.close(),2030===e.code||4e3===e.code?t.$toast("用户名密码不正确"):t.$toast(a.d)})):this.$toast("用户名密码不正确")},handleWxLogin:function(){this.$indicator.open("登录中..."),c.a.getStorage(a.a),this.wxLogin()},handleLoginSuccess:function(){var t=c.a.getStorage(a.a);t=t?decodeURIComponent(t):"/",this.$router.replace(t)},handleLoginFail:function(){this.$toast("登录失败")}})},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page full flex flex-col login",class:{show:!t.isLogin}},[n("my-header",{attrs:{title:"登录"}}),t._v(" "),n("div",{staticClass:"login-main"},[n("mt-field",{attrs:{label:"用户名",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),n("mt-field",{attrs:{label:"密码",placeholder:"请输入密码",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("mt-button",{staticClass:"btn login-btn",attrs:{size:"large"},nativeOn:{click:function(e){t.handleLogin()}}},[t._v("登录")]),t._v(" "),n("mt-button",{staticClass:"btn wxlogin-btn",attrs:{size:"large"},nativeOn:{click:function(e){t.handleWxLogin()}}},[t._v("一键授权")])],1)],1)},staticRenderFns:[]};var u=n("VU/8")(r,l,!1,function(t){n("fOUM"),n("4eo9")},"data-v-5a140913",null);e.default=u.exports},fOUM:function(t,e){}});