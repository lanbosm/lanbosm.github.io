webpackJsonp([10],{"5Z7Z":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),a=i.n(s),c=i("NYxO"),n={name:"cart",data:function(){return{loading:!0,allchecked:!0,ddd:!1}},computed:a()({},Object(c.e)("cart",["cartList"]),Object(c.c)("cart",["totalPrice","totalBuys"]),Object(c.c)("address",["defaultAddress"])),created:function(){this.fetchData()},methods:a()({},Object(c.b)("cart",["getCartList","editPush"]),{fetchData:function(){this.loading=!0},swipeItemStart:function(t,e,i){var s=this;if(e.classList.contains("moved"))return!1;[].forEach.call(document.querySelectorAll(".moved"),function(t){return s.$animate.elasticTransition(t,{transform:"translate(0px,0px)"},function(){t.classList.remove("moved")})}),e.classList.add("moved")},swipeItemEnd:function(t,e,i){this.ddd=!1;var s=0;t.distanceX<-80&&(s=-80),this.$animate.bufferTransition(e,{transform:"translate("+s+"px,0px)"},function(){0===s&&e.classList.remove("moved")})},swipeItemMove:function(t,e,i){if("X"===t.swipeAxis&&(this.ddd=!0),"Y"!==t.swipeAxis){e.getBoundingClientRect().width;var s=e.getBoundingClientRect().left;(s+=t.deltaX)>0?s-=.8*t.deltaX:s<-80&&(s-=.8*t.deltaX),this.$animate.setCSS(e,{transform:"translate("+s+"px,0px)"})}},handleEdit:function(){alert("编辑")},handleDelete:function(t,e){var i=this;this.$messagebox({title:"确认删除吗",message:" ",showCancelButton:!0}).then(function(s){"confirm"===s&&(t.splice(e,1),i.cartList.forEach(function(t,e){0==t.brand.items.length&&i.cartList.splice(e,1)}))})},selectItem:function(t){console.log(t),this.editPush(t)},selectBrand:function(t){var e=this,i=!!t.checked&&t.checked;t.items.forEach(function(t,s){e.$set(t,"checked",i),e.selectItem(t)})},selectAll:function(){var t=this,e=this.$refs.allselect.checked;this.cartList.forEach(function(i,s){t.$set(i.brand,"checked",e),t.selectBrand(i.brand)})},handleClick2:function(){this.pagePush("/wallet")}})},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page full flex flex-col cart"},[i("my-header",{attrs:{title:"购物车"}},[i("div",{attrs:{slot:"right"},on:{click:t.handleEdit},slot:"right"},[t._v("编辑")])]),t._v(" "),t.cartList.length>0?i("div",{staticClass:"cart-main"},[i("simple-scroll",{ref:"categoryBarScroll",staticClass:"cart-list",attrs:{lock:t.ddd,direction:"vertical"}},[i("ul",{staticClass:"brand-list"},t._l(t.cartList,function(e){return i("li",{staticClass:"brand-item"},[i("div",{staticClass:"brand-title"},[i("div",{staticClass:"item-left"},[i("check-box",{attrs:{item:e.brand},on:{change:t.selectBrand}})],1),t._v(" "),i("div",{staticClass:"item-right"},[i("span",{staticClass:"text"},[t._v(t._s(e.brand.name))])])]),t._v(" "),i("div",{staticClass:"item-list"},[i("transition-group",{attrs:{name:"list",tag:"ul"}},t._l(e.brand.items,function(s,a){return i("div",{key:s.id,staticClass:"item list-item"},[i("div",{staticClass:"item-bg"},[i("div",{staticClass:"item-del-btn",on:{click:function(i){t.handleDelete(e.brand.items,a)}}},[t._v("\n                                        删除\n                                    ")])]),t._v(" "),i("div",{directives:[{name:"finger",rawName:"v-finger:swipe",value:{events:{touchStart:t.swipeItemStart,touchMove:t.swipeItemMove,touchEnd:t.swipeItemEnd},item:s,index:a},expression:"{ events:{touchStart:swipeItemStart,touchMove:swipeItemMove,touchEnd:swipeItemEnd},item: item ,index:index}",arg:"swipe"}],staticClass:"item-fg"},[i("div",{staticClass:"item-left"},[i("check-box",{attrs:{item:s},on:{change:t.selectItem}})],1),t._v(" "),i("div",{staticClass:"item-right"},[i("div",{staticClass:"item-img",on:{click:function(e){t.pagePush("/detail/"+s.id)}}},[i("img",{staticClass:"img-responsive",attrs:{src:s.image}})]),t._v(" "),i("div",{staticClass:"item-txt item-itemName"},[t._v("\n                                              "+t._s(s.name)+"\n                                        ")]),t._v(" "),i("div",{staticClass:"item-txt item-itemDesc"},[t._v("\n                                              数量 * "+t._s(s.quantity)+"\n                                        ")]),t._v(" "),i("div",{staticClass:"item-txt item-spec"},[t._v("\n                                              "+t._s(s.desc)+"\n                                        ")]),t._v(" "),i("div",{staticClass:"item-txt item-price"},[t._v("\n                                              "+t._s(t._f("currency")(s.price*s.quantity))+"\n                                        ")])])])])}))],1)])}))]),t._v(" "),i("div",{staticClass:"cart-bom-bar"},[i("div",{staticClass:" col col1"},[i("check-box",{ref:"allselect",on:{change:t.selectAll}}),t._v("全选\n             ")],1),t._v(" "),i("div",{staticClass:"col col2"},[t._v("合计:"+t._s(t._f("currency")(t.totalPrice)))]),t._v(" "),i("div",{staticClass:"col col3",on:{click:function(e){t.pagePush("/pay")}}},[t._v(" 结算("+t._s(t.totalBuys)+")")])])],1):i("data-error",{attrs:{message:"空空如也"}},[i("mt-button",{on:{click:function(e){t.pagePush("/category")}}},[t._v("去购物")])],1),t._v(" "),i("my-footer")],1)},staticRenderFns:[]};var r=i("VU/8")(n,l,!1,function(t){i("Rk/x")},"data-v-cfa52906",null);e.default=r.exports},"Rk/x":function(t,e){}});